"use strict";(self.webpackChunkjus=self.webpackChunkjus||[]).push([[999],{89999:function(r,e,t){t.r(e),t.d(e,{PhantomInjectedProvider:function(){return z},SlopeInjectedProxyProvider:function(){return U},SolanaPrivateKeyProvider:function(){return sr},SolanaWallet:function(){return ir},SolflareInjectedProvider:function(){return L},SolletInjectedProvider:function(){return X},TorusInjectedProvider:function(){return Q}});var n=t(15671),a=t(43144),s=t(60136),i=t(82963),c=t(61120),u=t(15861),o=t(4942),p=t(64687),f=t.n(p),h=t(7874),l=t(23484),v=t(41436),d=t(88129),g=t(79955),m=t.n(g),y=t(98689),w=t(41584),x=t(80889),b=t.n(x),k=t(40918).Buffer;function P(r){return function(e,t,n,a){return"solana_chainId"===e.method?(t.result=r,a()):n()}}function Z(r){return function(e,t,n,a){return"solana_provider_config"===e.method?(t.result=r,a()):n()}}function O(r){var e=r.chainId;return(0,l.UZ)([P(e),Z(r)])}function E(r){var e=r.rpcTarget,t=(0,h.v$)({rpcTarget:e});return{networkMiddleware:(0,l.UZ)([O(r),t]),fetchMiddleware:t}}function A(r){var e=r.getAccounts;return(0,l.Pk)(function(){var r=(0,u.Z)(f().mark((function r(t,n,a){var s;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("getAccounts"===t.method){r.next=3;break}return r.abrupt("return",a());case 3:if(e){r.next=5;break}throw new Error("WalletMiddleware - opts.getAccounts not provided");case 5:return r.next=7,e(t);case 7:return s=r.sent,n.result=s,r.abrupt("return",void 0);case 10:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}())}function j(r){var e=r.requestAccounts;return(0,l.Pk)(function(){var r=(0,u.Z)(f().mark((function r(t,n,a){var s;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("requestAccounts"===t.method){r.next=3;break}return r.abrupt("return",a());case 3:if(e){r.next=5;break}throw new Error("WalletMiddleware - opts.requestAccounts not provided");case 5:return r.next=7,e(t);case 7:return s=r.sent,n.result=s,r.abrupt("return",void 0);case 10:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}())}function S(r,e){return(0,l.Pk)(function(){var t=(0,u.Z)(f().mark((function t(n,a,s){var i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.method===r){t.next=3;break}return t.abrupt("return",s());case 3:if(e){t.next=5;break}throw new Error("WalletMiddleware - ".concat(r," not provided"));case 5:return t.next=7,e(n);case 7:return i=t.sent,a.result=i,t.abrupt("return",void 0);case 10:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())}function T(r){var e=r.getAccounts,t=r.requestAccounts,n=r.signTransaction,a=r.signAndSendTransaction,s=r.signAllTransactions,i=r.signMessage,c=r.getPrivateKey,u=r.getSecretKey;return(0,l.UZ)([j({requestAccounts:t}),A({getAccounts:e}),S("signTransaction",n),S("signAndSendTransaction",a),S("signAllTransactions",s),S("signMessage",i),S("solanaPrivateKey",c),S("solanaSecretKey",u)])}function I(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,n)}return t}function C(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?I(Object(t),!0).forEach((function(e){(0,o.Z)(r,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}))}return r}function K(r){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(r){return!1}}();return function(){var t,n=(0,c.Z)(r);if(e){var a=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,i.Z)(this,t)}}var R=function(r){(0,s.Z)(t,r);var e=K(t);function t(r){var a=r.config,s=r.state;return(0,n.Z)(this,t),e.call(this,{config:{chainConfig:C(C({},a.chainConfig),{},{chainNamespace:v.EN.SOLANA})},state:s})}return(0,a.Z)(t,[{key:"switchChain",value:function(){var r=(0,u.Z)(f().mark((function r(e){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.resolve());case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var r=(0,u.Z)(f().mark((function r(e){var t,n,a,s,i,c;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=new l.eI,n=this.getProviderHandlers(e),a=T(n),t.push(a),s=O(this.config.chainConfig),t.push(s),(i=this.getInjectedProviderProxy(e))&&t.push(i),c=(0,h.Xj)(t),this.updateProviderEngineProxy(c),r.next=12,this.lookupNetwork();case 12:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var r=(0,u.Z)(f().mark((function r(){var e;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.config.chainConfig,this.update({chainId:e.chainId}),r.abrupt("return",e.chainId||"");case 3:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}()},{key:"getInjectedProviderProxy",value:function(r){}}]),t}(d.Zk),q=function(r){var e={requestAccounts:function(){var e=(0,u.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.publicKey?[m().encode(r.publicKey.toBytes())]:[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAccounts:function(){var e=(0,u.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.publicKey?[m().encode(r.publicKey.toBytes())]:[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getPrivateKey:function(){var r=(0,u.Z)(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:throw y.ethErrors.rpc.methodNotSupported();case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),getSecretKey:function(){var r=(0,u.Z)(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:throw y.ethErrors.rpc.methodNotSupported();case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),signTransaction:function(){var e=(0,u.Z)(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.signTransaction(t.params.message);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signMessage:function(){var e=(0,u.Z)(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.signMessage(t.params.message,t.params.display);case 2:return n=e.sent,e.abrupt("return",n.signature);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signAllTransactions:function(){var e=(0,u.Z)(f().mark((function e(t){var n,a,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.params)&&void 0!==n&&n.message&&null!==(a=t.params)&&void 0!==a&&a.message.length){e.next=2;break}throw y.ethErrors.rpc.invalidParams("message");case 2:return e.next=4,r.signAllTransactions(t.params.message);case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signAndSendTransaction:function(){var e=(0,u.Z)(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.signAndSendTransaction(t.params.message);case 2:return n=e.sent,e.abrupt("return",{signature:n.signature});case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};return e};function M(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,n)}return t}function N(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?M(Object(t),!0).forEach((function(e){(0,o.Z)(r,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}))}return r}function _(r){return(0,l.Pk)(function(){var e=(0,u.Z)(f().mark((function e(t,n,a){var s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request(N({},t));case 2:s=e.sent,n.result=s;case 4:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}())}function B(r){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(r){return!1}}();return function(){var t,n=(0,c.Z)(r);if(e){var a=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,i.Z)(this,t)}}var z=function(r){(0,s.Z)(t,r);var e=B(t);function t(){return(0,n.Z)(this,t),e.apply(this,arguments)}return(0,a.Z)(t,[{key:"getProviderHandlers",value:function(r){return q(r)}},{key:"getInjectedProviderProxy",value:function(r){return _(r)}}]),t}(R);function D(r){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(r){return!1}}();return function(){var t,n=(0,c.Z)(r);if(e){var a=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,i.Z)(this,t)}}var U=function(r){(0,s.Z)(t,r);var e=D(t);function t(){return(0,n.Z)(this,t),e.apply(this,arguments)}return(0,a.Z)(t,[{key:"getProviderHandlers",value:function(r){return function(r,e){var t={requestAccounts:function(){var e=(0,u.Z)(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.connect();case 2:return t=e.sent,n=t.data,e.abrupt("return",[n.publicKey]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAccounts:function(){var e=(0,u.Z)(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.connect();case 2:return t=e.sent,n=t.data,e.abrupt("return",[n.publicKey]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getPrivateKey:function(){var r=(0,u.Z)(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:throw y.ethErrors.rpc.methodNotSupported();case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),getSecretKey:function(){var r=(0,u.Z)(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:throw y.ethErrors.rpc.methodNotSupported();case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),signTransaction:function(){var e=(0,u.Z)(f().mark((function e(t){var n,a,s,i,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.params.message){e.next=3;break}throw y.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});case 3:return e.next=5,r.signTransaction(m().encode(n.serializeMessage()));case 5:if(a=e.sent,(s=a.data).publicKey&&s.signature){e.next=9;break}throw new Error("Invalid signature from slope wallet");case 9:return i=new w.nh(s.publicKey),c=m().decode(s.signature),n.addSignature(i,c),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signMessage:function(){var e=(0,u.Z)(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.signMessage(t.params.message);case 2:return n=e.sent,e.abrupt("return",m().decode(n.data.signature));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signAndSendTransaction:function(){var t=(0,u.Z)(f().mark((function t(n){var a,s,i,c,u,o,p,h,l;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e()){t.next=3;break}throw y.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:if(s=n.params.message){t.next=6;break}throw y.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});case 6:return t.next=8,r.signTransaction(m().encode(s.serializeMessage()));case 8:if(i=t.sent,(c=i.data).publicKey&&c.signature){t.next=12;break}throw new Error("Invalid signature from slope wallet");case 12:return u=new w.nh(c.publicKey),o=m().decode(c.signature),s.addSignature(u,o),t.next=17,a.request({method:"solana_provider_config",params:[]});case 17:return p=t.sent,h=new w.ew(p.rpcTarget),t.next=21,h.sendRawTransaction(s.serialize());case 21:return l=t.sent,t.abrupt("return",{signature:l});case 23:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),signAllTransactions:function(){var e=(0,u.Z)(f().mark((function e(t){var n,a,s,i,c,u,o,p,h,l,v,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.params)&&void 0!==n&&n.message&&null!==(a=t.params)&&void 0!==a&&a.message.length){e.next=2;break}throw y.ethErrors.rpc.invalidParams("message");case 2:for(i=t.params.message,c=i.length,u=[],o=0;o<c;o++)u.push(m().encode(t.params.message[o].serializeMessage()));return e.next=8,r.signAllTransactions(u);case 8:if(p=e.sent,h=p.msg,(l=p.data).publicKey&&(null===(s=l.signatures)||void 0===s?void 0:s.length)===c){e.next=13;break}throw new Error(h);case 13:for(v=new w.nh(l.publicKey),o=0;o<c;o++)d=m().decode(l.signatures[o]),i[o].addSignature(v,d);return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};return t}(r,this.getProviderEngineProxy.bind(this))}}]),t}(R);function H(r){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(r){return!1}}();return function(){var t,n=(0,c.Z)(r);if(e){var a=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,i.Z)(this,t)}}var L=function(r){(0,s.Z)(t,r);var e=H(t);function t(){return(0,n.Z)(this,t),e.apply(this,arguments)}return(0,a.Z)(t,[{key:"getProviderHandlers",value:function(r){return function(r,e){var t=q(r);return t.signAndSendTransaction=function(){var t=(0,u.Z)(f().mark((function t(n){var a,s,i,c,u;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e()){t.next=3;break}throw y.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return t.next=5,r.signTransaction(n.params.message);case 5:return s=t.sent,t.next=8,a.request({method:"solana_provider_config",params:[]});case 8:return i=t.sent,c=new w.ew(i.rpcTarget),t.next=12,c.sendRawTransaction(s.serialize());case 12:return u=t.sent,t.abrupt("return",{signature:u});case 14:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),t}(r,this.getProviderEngineProxy.bind(this))}}]),t}(R);function W(r){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(r){return!1}}();return function(){var t,n=(0,c.Z)(r);if(e){var a=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,i.Z)(this,t)}}var X=function(r){(0,s.Z)(t,r);var e=W(t);function t(){return(0,n.Z)(this,t),e.apply(this,arguments)}return(0,a.Z)(t,[{key:"getProviderHandlers",value:function(r){return function(r,e){var t=q(r);return t.signMessage=function(){var e=(0,u.Z)(f().mark((function e(t){var n,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.sign(t.params.message,"utf8");case 2:return n=e.sent,a=n.signature,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),t.signAndSendTransaction=function(){var t=(0,u.Z)(f().mark((function t(n){var a,s,i,c,u;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e()){t.next=3;break}throw y.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return t.next=5,r.signTransaction(n.params.message);case 5:return s=t.sent,t.next=8,a.request({method:"solana_provider_config",params:[]});case 8:return i=t.sent,c=new w.ew(i.rpcTarget),t.next=12,c.sendRawTransaction(s.serialize());case 12:return u=t.sent,t.abrupt("return",{signature:u});case 14:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),t}(r,this.getProviderEngineProxy.bind(this))}}]),t}(R),$=function(r){var e={requestAccounts:function(){var e=(0,u.Z)(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request({method:"solana_requestAccounts",params:{}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAccounts:function(){var e=(0,u.Z)(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request({method:"solana_requestAccounts",params:{}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getPrivateKey:function(){var r=(0,u.Z)(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:throw y.ethErrors.rpc.methodNotSupported();case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),getSecretKey:function(){var r=(0,u.Z)(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:throw y.ethErrors.rpc.methodNotSupported();case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),signMessage:function(){var e=(0,u.Z)(f().mark((function e(t){var n,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.params)&&void 0!==n&&n.message){e.next=2;break}throw y.ethErrors.rpc.invalidParams("message");case 2:return e.next=4,r.signMessage(t.params.message);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signTransaction:function(){var e=(0,u.Z)(f().mark((function e(t){var n,a,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.params)&&void 0!==n&&n.message){e.next=2;break}throw y.ethErrors.rpc.invalidParams("message");case 2:return a=t.params.message,e.next=5,r.signTransaction(a);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signAndSendTransaction:function(){var e=(0,u.Z)(f().mark((function e(t){var n,a,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.params)&&void 0!==n&&n.message){e.next=2;break}throw y.ethErrors.rpc.invalidParams("message");case 2:return a=t.params.message,e.next=5,r.sendTransaction(a);case 5:return s=e.sent,e.abrupt("return",{signature:s});case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signAllTransactions:function(){var e=(0,u.Z)(f().mark((function e(t){var n,a,s,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.params)&&void 0!==n&&n.message&&null!==(a=t.params)&&void 0!==a&&a.message.length){e.next=2;break}throw y.ethErrors.rpc.invalidParams("message");case 2:return s=t.params.message,e.next=5,r.signAllTransactions(s);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};return e};function F(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,n)}return t}function G(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?F(Object(t),!0).forEach((function(e){(0,o.Z)(r,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}))}return r}function J(r){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(r){return!1}}();return function(){var t,n=(0,c.Z)(r);if(e){var a=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,i.Z)(this,t)}}var Q=function(r){(0,s.Z)(t,r);var e=J(t);function t(r){var a=r.config,s=r.state;return(0,n.Z)(this,t),e.call(this,{config:{chainConfig:G(G({},a.chainConfig),{},{chainNamespace:v.EN.SOLANA})},state:s})}return(0,a.Z)(t,[{key:"switchChain",value:function(){var r=(0,u.Z)(f().mark((function r(e){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.resolve());case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var r=(0,u.Z)(f().mark((function r(e){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.handleInjectedProviderUpdate(e),r.next=3,this.setupEngine(e);case 3:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var r=(0,u.Z)(f().mark((function r(){var e,t,n;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.provider){r.next=2;break}throw y.ethErrors.provider.custom({message:"Torus solana provider is not initialized",code:4902});case 2:return e=this.config.chainConfig.chainId,r.next=5,this.provider.request({method:"solana_chainId"});case 5:if(t=r.sent,n=(0,v.H2)(t.toString())?t:"0x".concat(parseInt(t,10).toString(16)),e===n){r.next=9;break}throw v.Ty.rpcConnectionError("Invalid network, net_version is: ".concat(n,", expected: ").concat(e));case 9:return this.update({chainId:n}),this.provider.emit("connect",{chainId:this.state.chainId}),this.provider.emit("chainChanged",this.state.chainId),r.abrupt("return",this.state.chainId);case 13:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}()},{key:"setupEngine",value:function(){var r=(0,u.Z)(f().mark((function r(e){var t,n,a,s,i;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=$(e),n=T(t),a=_(e),(s=new l.eI).push(n),s.push(a),i=(0,h.Xj)(s),this.updateProviderEngineProxy(i),r.next=10,this.lookupNetwork();case 10:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"handleInjectedProviderUpdate",value:function(){var r=(0,u.Z)(f().mark((function r(e){var t=this;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.on("accountsChanged",function(){var r=(0,u.Z)(f().mark((function r(e){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.provider.emit("accountsChanged",e);case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()),e.on("chainChanged",function(){var r=(0,u.Z)(f().mark((function r(n){var a;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=(0,v.H2)(n)?n:"0x".concat(parseInt(n,10).toString(16)),t.configure({chainConfig:G(G({},t.config.chainConfig),{},{chainId:a})}),r.next=4,t.setupProvider(e);case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}]),t}(d.Zk);function V(r,e){var t="undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function(r,e){if(!r)return;if("string"===typeof r)return Y(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(r);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Y(r,e)}(r))||e&&r&&"number"===typeof r.length){t&&(r=t);var n=0,a=function(){};return{s:a,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,c=!1;return{s:function(){t=t.call(r)},n:function(){var r=t.next();return i=r.done,r},e:function(r){c=!0,s=r},f:function(){try{i||null==t.return||t.return()}finally{if(c)throw s}}}}function Y(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function rr(r){return er.apply(this,arguments)}function er(){return er=(0,u.Z)(f().mark((function r(e){var t,n,a,s,i;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.privKey,n=e.getProviderEngineProxy,a=function(){return w.RG.fromSecretKey(k.from(t,"hex"))},"string"===typeof t){r.next=4;break}throw v.Ty.invalidParams("privKey must be a string");case 4:return s=a(),i={requestAccounts:function(){var r=(0,u.Z)(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",[s.publicKey.toBase58()]);case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),getAccounts:function(){var r=(0,u.Z)(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",[s.publicKey.toBase58()]);case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),getPrivateKey:function(){var r=(0,u.Z)(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",t);case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),getSecretKey:function(){var r=(0,u.Z)(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",m().encode(s.secretKey));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),signTransaction:function(){var r=(0,u.Z)(f().mark((function r(e){var t,n;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==(t=e.params)&&void 0!==t&&t.message){r.next=2;break}throw y.ethErrors.rpc.invalidParams("message");case 2:return(n=e.params.message).partialSign(s),r.abrupt("return",n);case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),signMessage:function(){var r=(0,u.Z)(f().mark((function r(e){var t,n;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==(t=e.params)&&void 0!==t&&t.message){r.next=2;break}throw y.ethErrors.rpc.invalidParams("message");case 2:return n=b().sign.detached(e.params.message,s.secretKey),r.abrupt("return",n);case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),signAndSendTransaction:function(){var r=(0,u.Z)(f().mark((function r(e){var t,a,i,c;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==(t=e.params)&&void 0!==t&&t.message){r.next=2;break}throw y.ethErrors.rpc.invalidParams("message");case 2:if(a=n()){r.next=5;break}throw y.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return(i=e.params.message).sign(s),r.next=9,a.request({method:"sendTransaction",params:[m().encode(i.serialize())]});case 9:return c=r.sent,r.abrupt("return",{signature:c});case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),signAllTransactions:function(){var r=(0,u.Z)(f().mark((function r(e){var t,n,a,i,c,u,o;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==(t=e.params)&&void 0!==t&&t.message&&null!==(n=e.params)&&void 0!==n&&n.message.length){r.next=2;break}throw y.ethErrors.rpc.invalidParams("message");case 2:i=null===(a=e.params)||void 0===a?void 0:a.message,c=V(i||[]);try{for(c.s();!(u=c.n()).done;)o=u.value,o.partialSign(s)}catch(p){c.e(p)}finally{c.f()}return r.abrupt("return",i);case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},r.abrupt("return",i);case 7:case"end":return r.stop()}}),r)}))),er.apply(this,arguments)}function tr(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,n)}return t}function nr(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(t),!0).forEach((function(e){(0,o.Z)(r,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):tr(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}))}return r}function ar(r){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(r){return!1}}();return function(){var t,n=(0,c.Z)(r);if(e){var a=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,i.Z)(this,t)}}var sr=function(r){(0,s.Z)(t,r);var e=ar(t);function t(r){var a=r.config,s=r.state;return(0,n.Z)(this,t),e.call(this,{config:{chainConfig:nr(nr({},a.chainConfig),{},{chainNamespace:v.EN.SOLANA})},state:s})}return(0,a.Z)(t,[{key:"enable",value:function(){var r=(0,u.Z)(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.state.privateKey){r.next=2;break}throw y.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});case 2:return r.next=4,this.setupProvider(this.state.privateKey);case 4:return r.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var r=(0,u.Z)(f().mark((function r(e){var t,n,a,s,i,c;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,rr({privKey:e,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)});case 2:return t=r.sent,n=T(t),a=new l.eI,s=E(this.config.chainConfig),i=s.networkMiddleware,a.push(this.getChainSwitchMiddleware()),a.push(this.getAccountMiddleware()),a.push(n),a.push(i),c=(0,h.Xj)(a),this.updateProviderEngineProxy(c),r.next=14,this.lookupNetwork();case 14:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"updateAccount",value:function(){var r=(0,u.Z)(f().mark((function r(e){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this._providerEngineProxy){r.next=2;break}throw y.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return r.next=4,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 4:if(r.sent===e.privateKey){r.next=14;break}return r.next=8,this.setupProvider(e.privateKey);case 8:return r.t0=this._providerEngineProxy,r.next=11,this._providerEngineProxy.request({method:"requestAccounts"});case 11:r.t1=r.sent,r.t2={accounts:r.t1},r.t0.emit.call(r.t0,"accountsChanged",r.t2);case 14:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"switchChain",value:function(){var r=(0,u.Z)(f().mark((function r(e){var t,n;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this._providerEngineProxy){r.next=2;break}throw y.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return t=this.getChainConfig(e.chainId),this.update({chainId:"loading"}),this.configure({chainConfig:t}),r.next=7,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 7:return n=r.sent,r.next=10,this.setupProvider(n);case 10:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var r=(0,u.Z)(f().mark((function r(){var e,t;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this._providerEngineProxy){r.next=2;break}throw y.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return r.next=4,this._providerEngineProxy.request({method:"getHealth",params:[]});case 4:if(e=r.sent,t=this.config.chainConfig,"ok"===e){r.next=8;break}throw v.Ty.rpcConnectionError("Failed to lookup network for following rpc target: ".concat(t.rpcTarget));case 8:return this.update({chainId:t.chainId}),this.state.chainId!==t.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),r.abrupt("return",this.state.chainId);case 11:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}()},{key:"getChainSwitchMiddleware",value:function(){var r=this,e={addNewChainConfig:function(){var e=(0,u.Z)(f().mark((function e(t){var n,a,s,i,c,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.params){e.next=2;break}throw y.ethErrors.rpc.invalidParams("Missing request params");case 2:if(n=t.params,a=n.chainId,s=n.chainName,i=n.rpcUrls,c=n.blockExplorerUrls,u=n.nativeCurrency,a){e.next=5;break}throw y.ethErrors.rpc.invalidParams("Missing chainId in chainParams");case 5:if(i&&0!==i.length){e.next=7;break}throw y.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");case 7:if(u){e.next=9;break}throw y.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");case 9:r.addChain({chainNamespace:v.EN.SOLANA,chainId:a,ticker:(null===u||void 0===u?void 0:u.symbol)||"SOL",tickerName:(null===u||void 0===u?void 0:u.name)||"Solana",displayName:s,rpcTarget:i[0],blockExplorer:(null===c||void 0===c?void 0:c[0])||""});case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),switchSolanaChain:function(){var e=(0,u.Z)(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.params){e.next=2;break}throw y.ethErrors.rpc.invalidParams("Missing request params");case 2:if(t.params.chainId){e.next=4;break}throw y.ethErrors.rpc.invalidParams("Missing chainId");case 4:return e.next=6,r.switchChain(t.params);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};return function(r){var e=r.addNewChainConfig,t=r.switchSolanaChain;return(0,l.UZ)([S("addSolanaChain",e),S("switchSolanaChain",t)])}(e)}},{key:"getAccountMiddleware",value:function(){var r=this,e={updatePrivatekey:function(){var e=(0,u.Z)(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.params){e.next=2;break}throw y.ethErrors.rpc.invalidParams("Missing request params");case 2:if(t.params.privateKey){e.next=4;break}throw y.ethErrors.rpc.invalidParams("Missing privateKey");case 4:return n=t.params.privateKey,e.next=7,r.updateAccount({privateKey:n});case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};return function(r){var e=r.updatePrivatekey;return(0,l.UZ)([S("updateAccount",e)])}(e)}}]),t}(d.Zk);(0,o.Z)(sr,"getProviderInstance",function(){var r=(0,u.Z)(f().mark((function r(e){var t;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=new sr({config:{chainConfig:e.chainConfig}}),r.next=3,t.setupProvider(e.privKey);case 3:return r.abrupt("return",t);case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());var ir=function(){function r(e){(0,n.Z)(this,r),(0,o.Z)(this,"provider",void 0),this.provider=e}return(0,a.Z)(r,[{key:"requestAccounts",value:function(){var r=(0,u.Z)(f().mark((function r(){var e;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request({method:"requestAccounts",params:{}});case 2:return e=r.sent,r.abrupt("return",e);case 4:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}()},{key:"signAndSendTransaction",value:function(){var r=(0,u.Z)(f().mark((function r(e){var t,n;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request({method:"signAndSendTransaction",params:{message:e}});case 2:return t=r.sent,n=t.signature,r.abrupt("return",{signature:n});case 5:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var r=(0,u.Z)(f().mark((function r(e){var t;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request({method:"signTransaction",params:{message:e}});case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"signAllTransactions",value:function(){var r=(0,u.Z)(f().mark((function r(e){var t;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request({method:"signAllTransactions",params:{message:e}});case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"signMessage",value:function(){var r=(0,u.Z)(f().mark((function r(e){var t;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request({method:"signMessage",params:{message:e}});case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"request",value:function(){var r=(0,u.Z)(f().mark((function r(e){var t;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request(e);case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()}]),r}()}}]);